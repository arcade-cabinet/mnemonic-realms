# Look-Ahead: Sketch Realm + Preserver Fortress -- Feature-Level Abstractions

> Generated by sketch-scout | Act 3 (Scenes 1-12)
> Revision 2: Shifted from per-map assemblage lists to composable feature-level abstractions

---

## The Onion: Atoms, Molecules, Organisms, Composer

The existing system already has the first two layers:

**Atoms** (palette tiles): `terrain:ground.grass`, `object:house.blue-large-1`, etc.
**Molecules** (assemblage factories): `createHouse()`, `createForestBorder()`, `createWheatField()`, `createStagnationClearing()`.

What's missing are **organisms** (feature clusters that a map composer auto-layouts) and the **composer** itself (the thing that knows "a hamlet goes here, connect it with roads, fill the rest with terrain").

This report identifies the organisms needed for Act 3's Sketch Realm and Preserver Fortress, then describes how they compose into maps. The goal: a map composer that takes `{ features: ['sketch-forest', 'archive-grove', 'crystal-path', 'living-clearing'], connections: [...] }` and produces a complete TMX.

---

## Part 1: Shared Feature Vocabulary

Before getting Sketch/Fortress specific, these are the cross-game organisms that Act 3 shares with Acts 1-2. Each organism below already has precedent somewhere in the existing codebase or other look-ahead reports. Act 3 needs palette-parameterized variants.

### Organism: Settlement

**Definition**: A cluster of buildings around a central gathering point, connected by paths, with NPC spawns and interaction points.

**Existing instances**: Everwick (village), Heartfield Hamlet (farming hamlet), Millbrook (riverside town), Flickering Village (frontier).

**Act 3 instances**:
- **Half-Built Village** (Luminous Wastes, 20,20) -- a sketch-outline settlement that solidifies on broadcast. Pre-solidification: outline objects only. Post-solidification: full village.
- **De-crystallized Fortress** (post-Endgame Bloom) -- the Fortress interior reuses the settlement pattern once crystal melts away. NPCs emerge from formerly frozen displays.

**Composable parameters**:
```typescript
interface Settlement {
  style: 'village' | 'hamlet' | 'camp' | 'sketch-outline' | 'fortress-interior';
  palette: string;                       // which tileset palette
  buildingCount: number;                 // how many structures
  buildings: BuildingSpec[];             // types, sizes, NPCs
  center: 'well' | 'fountain' | 'square' | 'gathering-fire' | 'empty';
  paths: 'roads' | 'dirt-trails' | 'crystal-corridors' | 'none';
  hasMerchant: boolean;
  hasRestPoint: boolean;
  hasQuestBoard: boolean;
  solidifiable?: boolean;                // Sketch-specific: transforms on broadcast
  solidifiedVariant?: string;            // assemblage ID for the solid version
}
```

**Why this matters for Act 3**: The Half-Built Village is NOT a new concept -- it is the Settlement organism with `style: 'sketch-outline'` and `solidifiable: true`. The map composer already knows how to lay out buildings around a center. The new thing is the dual-state rendering.

### Organism: Border

**Definition**: A map-edge zone that blocks traversal except at gate points.

**Existing instances**: `createForestBorder()` (emerald trees), used on all Settled Lands maps.

**Act 3 instances**:
- **Void Border** (all Sketch maps) -- the map edge is not forest but luminous void fading to white. No trees, no collision -- just visual gradient.
- **Crystal Wall Border** (Fortress floors) -- crystal walls enclosing the dungeon. Fracture points where gods break through.
- **World Edge** (Luminous Wastes west boundary) -- unique: the void is NOT a border, it's the world ending. No collision. Player can stand at the edge.

**Composable parameters**:
```typescript
interface Border {
  edge: 'north' | 'south' | 'east' | 'west';
  length: number;
  depth: number;
  style: 'forest' | 'void-fade' | 'crystal-wall' | 'world-edge' | 'cliff' | 'water';
  gates: { position: number; width: number; condition?: string }[];
  treeRefs?: string[];                   // for forest borders
  fracturePoints?: FractureSpec[];       // for crystal walls
}
```

### Organism: Transition Strip

**Definition**: A gradient zone connecting two different biomes/maps at their boundary.

**Existing instances**: Sunridge threshold (settled -> frontier), Flickerveil Veil's Edge (frontier -> sketch).

**Act 3 instances**:
- **Veil's Edge** (Half-Drawn Forest west edge) -- 3-tile gradient from detailed Flickerveil to Sketch line-art
- **Sketch-to-Crystal** (Undrawn Peaks at Fortress Gate) -- transition from luminous void terrain to cold blue crystal

**Composable parameters**:
```typescript
interface TransitionStrip {
  direction: 'horizontal' | 'vertical';
  length: number;
  depth: number;                         // gradient width in tiles
  fromTerrain: string;                   // e.g., 'ground.forest-floor'
  toTerrain: string;                     // e.g., 'void.luminous'
  transition: 'gradient' | 'hard-cut' | 'scatter';
}
```

### Organism: Resonance Point

**Definition**: A location with one or more Resonance Stones, possibly a rest point, and associated lore/fragment rewards.

**Existing instances**: Every map has these scattered. Heartfield has 4. Ambergrove has 5 in a Hearthstone Circle arrangement.

**Act 3 instances**:
- **Archive of Intentions** (Half-Drawn Forest, 28,9) -- spiral arrangement of 3 Resonance Stones with lore triggers
- **The Living Sketch** (Half-Drawn Forest, 20,25) -- a broadcasting-created Resonance Stone that materializes on solidification
- **Fortress Rest Points** (F1 5,11 and F2 3,17) -- standard rest RS inside crystal corridors
- **First Memory Pedestal** (F3 10,18) -- unique story-critical Resonance Stone

**Composable parameters**:
```typescript
interface ResonancePoint {
  layout: 'single' | 'pair' | 'circle' | 'spiral' | 'pedestal';
  stoneCount: number;
  stones: { id: string; fragment: string; frozen?: boolean; dormant?: boolean }[];
  isRestPoint: boolean;
  loreTriggerId?: string;
  requiresBroadcast?: boolean;           // Sketch: stone appears after broadcasting
  terrain: string;                       // ground under the stones
}
```

### Organism: Encounter Zone

**Definition**: A region where random encounters spawn, defined by bounds and enemy tables.

**Every overworld map has these**. The DDL already has `enemyZones[]` per map.

**Act 3 specifics**: Sketch enemies (Sketch Wolf packs, Unfinished Treants, Memory Echoes) and Fortress patrols (Preserver Agents, Archivists, Captains) use the same encounter zone pattern.

No new organism type needed -- the existing `enemyZones` DDL field covers this. The composer just needs to stamp the correct terrain underneath.

### Organism: Depths Entrance

**Definition**: A transition point from surface to underground dungeon.

**Existing instances**: Everwick -> Depths L1, Shimmer Marsh -> L2, Hollow Ridge -> L3, Resonance Fields -> L4.

**Act 3 instances**:
- **Sketch Passage** (Half-Drawn Forest, 13,36) -- gap in forest floor leading to Depths L5

Same organism, sketch-palette variant.

---

## Part 2: Sketch Realm Organisms (NEW)

These organisms have no precedent in Acts 1-2. They are the Sketch's signature features.

### Organism: Sketch Void Expanse

**Definition**: A large open area filled with luminous void terrain. Sparse scatter objects suggest incompleteness. The dominant "terrain feature" of Sketch maps -- the equivalent of the grassland that fills Settled Lands maps.

**Where used**: Default fill for all 3 Sketch maps. Luminous Wastes is 90%+ this organism.

**Sub-molecules**:
- Void ground fill (`void.luminous` terrain)
- Scatter objects: lone fence post, single well outline, one-line tree, a few bricks. Placed at low density (1 object per ~100 tiles).
- Optional grid lines (faint graph paper effect on ground2 layer)
- Shadow layer for party shadows (the most detailed thing on screen)

**Composable parameters**:
```typescript
interface SketchVoidExpanse {
  width: number;
  height: number;
  scatterDensity: 'none' | 'sparse' | 'moderate';  // objects per 100 tiles
  scatterObjects: string[];              // palette refs for scatter
  hasGridLines: boolean;                 // graph paper effect
  voidIntensity: 'luminous' | 'deep' | 'edge';      // visual brightness
}
```

**Relation to existing patterns**: This is analogous to `defaultGround: 'ground.grass'` but with scatter objects. The composer fills the canvas with this, then carves out features.

### Organism: Crystal Highway

**Definition**: A 3-tile-wide crystallized path cutting through Sketch terrain. Built by the Preservers. Traversable but hostile (SP drain, enemy patrols).

**Where used**: All 3 Sketch maps (Half-Drawn Forest right path, Luminous Wastes route, Undrawn Peaks approach to Fortress).

**Sub-molecules**:
- Crystal road terrain (`crystal.path`, 3 tiles wide)
- Crystal border terrain (`crystal.dark`, 1 tile on each side)
- Enemy patrol spawns along its length
- SP drain zone metadata

**Composable parameters**:
```typescript
interface CrystalHighway {
  waypoints: { x: number; y: number }[];
  width: 3;                              // always 3 tiles
  terrain: 'crystal.path';
  borderTerrain: 'crystal.dark';
  spDrainPerSecond: number;
  patrols: { enemyId: string; spacing: number }[];
}
```

**Relation to existing patterns**: This is a `PathSegment` (the map already has `paths[]`) with added metadata for SP drain and patrol spawns. Not a fundamentally new organism -- it's a decorated path.

### Organism: Solidification Zone

**Definition**: An area of the Sketch that can be broadcast-solidified. Has two visual states: void (pre-broadcast) and detailed (post-broadcast). The area solidified depends on fragment potency.

**Where used**: Throughout all 3 Sketch maps. Key instances:
- Half-Drawn Forest: Living Sketch clearing, river crossing stepping stones
- Luminous Wastes: Half-Built Village
- Undrawn Peaks: 3 climbing ledges, Sketch Bridge

**This is THE new mechanic of Act 3.** It crosscuts terrain, settlement, and path organisms.

**Sub-molecules**:
- Pre-state terrain patch (void.luminous fill)
- Post-state assemblage (the "real" terrain/building/clearing that appears)
- Broadcast trigger zone
- Fragment potency requirement
- Solidification animation metadata (for runtime)

**Composable parameters**:
```typescript
interface SolidificationZone {
  center: { x: number; y: number };
  preState: string;                      // terrain fill before solidification (void.luminous)
  postStateAssemblage: string;           // assemblage ID that replaces the void
  requiredPotency: number;               // minimum fragment potency (1-5)
  tileRadius: number;                    // 3x3 to 9x9 depending on potency
  required: boolean;                     // is this on the critical path?
  rewardOnSolidify?: {                   // optional: RS appears after solidification
    resonanceStone?: ResonancePoint;
    chest?: string;
  };
}
```

**Implementation strategy**: The assemblage system generates the POST-state map (detailed terrain everywhere). The vibrancy system renders it as void at low vibrancy. Broadcasting raises local vibrancy, revealing the detail. This avoids needing a dual-state tile system -- just vibrancy-driven tier rendering, which already exists.

### Organism: Wireframe Mountain Mass

**Definition**: A large elevated terrain structure rendered as geometric wireframe. Clean lines, glowing vertices, visible construction geometry. The Undrawn Peaks' signature feature.

**Where used**: Undrawn Peaks only.

**Sub-molecules**:
- Cliff terrain blocks (`cliff.sand`, `cliff.wireframe`) forming mountain walls
- Glowing vertex markers (magic crystal animations at corners)
- Line-segment paths connecting nodes (narrow walkable paths between vertices)
- Summit platform (flat area at top -- The Apex)

**Composable parameters**:
```typescript
interface WireframeMountain {
  footprint: { x: number; y: number; width: number; height: number };
  peakPosition: { x: number; y: number };
  vertices: { x: number; y: number; hasGlowMarker: boolean }[];
  edges: { from: number; to: number; walkable: boolean }[];
  summitPlatform?: { width: number; height: number; terrain: string };
}
```

**Relation to existing patterns**: The `cliff-plateau` organism from the Settled Lands report (Sunridge) is a simpler version of this. Wireframe Mountain is a cliff-plateau with explicit vertex/edge graph structure. The composer lays out cliff terrain from the vertex graph.

### Organism: World Edge

**Definition**: The absolute boundary of the game world. Beyond this: warm white void with new lines slowly drawing themselves. A narrative feature, not a gameplay barrier.

**Where used**: Luminous Wastes, western boundary only.

**Sub-molecules**:
- Void terrain gradient (void.luminous -> void.edge -> pure white/empty)
- No collision (player can walk to the very edge)
- 5-second animation of new sketch-lines appearing in void (runtime, not assemblage)
- Narrative trigger point (Artun/Hana dialogue)

**Composable parameters**:
```typescript
interface WorldEdge {
  edge: 'north' | 'south' | 'east' | 'west';
  length: number;
  gradientDepth: number;                 // tiles from normal void to absolute edge
  narrativeTrigger?: string;             // event ID for the narrative beat
}
```

This is a specialized Border variant. The composer places it at the map edge instead of a standard border.

---

## Part 3: Fortress Organisms (NEW)

The Fortress is structurally a dungeon (enclosed rooms, corridors, bosses) but with a unique crystal aesthetic and narrative-heavy puzzle design. Most organisms here are dungeon variants.

### Organism: Gallery Room

**Definition**: A crystalline museum room containing one or more "frozen moments" -- crystallized scenes of frozen NPCs. The player navigates through them, confronting the beauty of what Grym has preserved.

**Where used**: Fortress F1 (Gallery of Moments -- 5 rooms), Fortress F2 (Archive of Perfection).

**Sub-molecules**:
- Crystal floor terrain (`crystal.slab` or `crystal.mid-slab`)
- Crystal wall borders
- Frozen scene displays (2x2 to 3x3 object clusters representing crystallized moments)
- Crystal barriers (destructible via god-fracture interaction)
- God-recall fracture points in walls

**Composable parameters**:
```typescript
interface GalleryRoom {
  width: number;
  height: number;
  frozenScenes: FrozenSceneSpec[];       // positioned display cases
  crystalBarriers: { x: number; y: number; breakableBy: 'fracture' }[];
  fracturePoints: FracturePoint[];
  exitCondition: 'barrier-clear' | 'boss-defeat' | 'always-open';
  narrativeWeight: 'light' | 'medium' | 'heavy';  // affects NPC detail density
}

interface FrozenSceneSpec {
  name: string;                          // e.g., 'The Festival Hall', 'The Child's First Steps'
  position: { x: number; y: number };
  size: { width: number; height: number };
  npcCount: number;                      // number of frozen figures
  interactable: boolean;                 // can the player examine this?
  isHazard: boolean;                     // can the boss activate this as stasis field?
}
```

**Relation to dungeon patterns**: This is the dungeon `dungeon-combat-room` or `dungeon-reward-room` organism wearing a crystal suit. The layout logic is the same (rectangular room, objects inside, collision on walls). What differs is the object vocabulary and the fracture-point interaction system.

### Organism: Moral Puzzle Room

**Definition**: A room presenting a forced choice where the player must sacrifice something. The Archive of Perfection's signature mechanic.

**Where used**: Fortress F2 Room 2.

**Sub-molecules**:
- 3 crystal pedestals arranged around a central lock
- Each pedestal holds a frozen scene (breakable)
- Central crystal lock (opens when exactly 2 pedestals are broken)
- One scene remains frozen until Endgame Bloom
- Dialogue trigger per scene (emotional narrative weight)

**Composable parameters**:
```typescript
interface MoralPuzzleRoom {
  width: number;
  height: number;
  choices: {
    id: string;
    name: string;                        // e.g., 'The Musicians', 'The Reunion', 'The Painter'
    position: { x: number; y: number };
    description: string;
  }[];
  requiredBreaks: number;                // how many to break (always 2 for now)
  lockPosition: { x: number; y: number };
  exitOnSolve: { x: number; y: number };
}
```

**This is unique to the Fortress.** No analogous organism elsewhere. But the pattern (N choices, pick K) could be parameterized for future puzzles.

### Organism: Boss Arena (Crystal Variant)

**Definition**: A large room for a boss encounter with crystal-specific environmental hazards.

**Where used**: F1 (Grym's Right Hand), F2 (Archive Keeper).

**Sub-molecules**:
- Full-width crystal floor room
- Boss spawn position
- Environmental hazards (frozen scenes that create stasis fields for Right Hand; frozen scene summons that halve healing for Archive Keeper)
- Crystal archway exit (to next floor)
- Pre-fight and post-fight dialogue triggers

**Composable parameters**:
```typescript
interface CrystalBossArena {
  width: number;
  height: number;
  bossId: string;
  bossSpawn: { x: number; y: number };
  hazards: EnvironmentalHazard[];
  exitArchway: { x: number; y: number; targetMap: string };
  preFightDialogue: string;
  postFightRewards: { fragment?: string; item?: string; buff?: string };
}
```

**Relation to dungeon patterns**: Extends `dungeon-boss-arena` with crystal hazards. The base layout is identical.

### Organism: Dialogue Chamber

**Definition**: A room with zero combat, designed purely for a narrative confrontation. The player enters, experiences dialogue, and makes a choice through action rather than menu.

**Where used**: Fortress F3 (the entire floor is one chamber). Also The Edge in Luminous Wastes.

**Sub-molecules**:
- Single vast room (F3 is 20x25 -- the entire map)
- Mirror-polished crystal floor
- Central focal point (First Memory pedestal)
- NPC position (Grym)
- God-response overlay zones (runtime: 4 possible effects based on recalled gods)
- No enemies, no puzzles, no barriers

**Composable parameters**:
```typescript
interface DialogueChamber {
  width: number;
  height: number;
  focalPoint: { x: number; y: number; type: 'pedestal' | 'altar' | 'edge' };
  npcPositions: { npcId: string; x: number; y: number }[];
  dialogueTriggerId: string;
  ambientEffects: string[];              // e.g., 'god-response-overlay', 'amber-pulse'
}
```

### Organism: God Fracture System (Cross-Fortress)

**Definition**: A set of crack/fracture positions in Fortress crystal walls. Each point renders differently based on which gods the player recalled in Act 2. Fractures are interactive -- striking them sends shockwaves that break crystal barriers.

**Where used**: Fortress F1 and F2 (not F3 -- "no fractures here, seamless walls").

**Sub-molecules per point**:
- Wall position (x, y)
- 4 visual variants (Verdance: green vine cracks, Kinesis: tectonic lines, Resonance: amber glow, Luminos: golden light)
- Interaction trigger (strike -> shockwave -> breaks nearby barriers)
- "No god recalled" default (no crack, barrier remains)

**This is a map-level metadata system, not a tile-stamp assemblage.** The composer places fracture point markers; runtime fills them based on player state. The assemblage for each fracture point is a 1x1 interactive trigger with god-conditional rendering.

```typescript
interface FracturePoint {
  position: { x: number; y: number };
  applicableGods: ('resonance' | 'verdance' | 'luminos' | 'kinesis')[];
  effect: 'barrier-break' | 'shortcut' | 'decorative';
  linkedBarriers: string[];              // IDs of crystal barriers this fracture can break
}
```

---

## Part 4: How the Organisms Compose into Maps

### Map Composition Pattern (Sketch Exterior)

```
1. Canvas: 80x80 at 16px, palette: desert-sketch
2. Fill: SketchVoidExpanse (entire canvas, sparse scatter)
3. Place features:
   a. Settlement (if any) -- e.g., Half-Built Village with solidifiable=true
   b. ResonancePoints -- scattered throughout
   c. CrystalHighway -- connecting to Fortress direction
   d. SolidificationZones -- player-activated terrain reveals
   e. UniqueFeatures -- WorldEdge, WireframeMountain, Archive Grove, etc.
4. Connect: auto-route paths between features using anchors
5. Border: VoidBorders on all edges, with TransitionStrips at map connections
6. Scatter: low-density decorative objects in remaining void space
7. Events: encounter zones, NPC spawns, narrative triggers
```

### Map Composition Pattern (Fortress Interior)

```
1. Canvas: 40x50 at 16px, palette: fortress-castles
2. Fill: crystal.wall (solid, impassable -- dungeon pattern)
3. Carve rooms:
   a. Entry hall (from Undrawn Peaks or previous floor)
   b. GalleryRooms (F1: 5 rooms, F2: 5 rooms)
   c. MoralPuzzleRoom (F2 only)
   d. CrystalBossArena (F1, F2)
   e. DialogueChamber (F3 only -- fills entire floor)
4. Connect rooms: corridors carved through crystal wall
5. Place fracture points: along corridors and in gallery rooms
6. Place crystal barriers: at chokepoints, linked to fracture points
7. Place events: boss triggers, dialogue triggers, stairway transitions
8. Place rest points and chests
```

### Sketch Map Breakdown (Feature List)

#### Half-Drawn Forest (Scene 1)
| Feature | Organism | Position | Notes |
|---------|----------|----------|-------|
| Default fill | SketchVoidExpanse | Full canvas | sparse scatter, grid lines off |
| Line-art trees | Border (forest style, sketch palette) | Perimeter | Sketch-tree objects instead of emerald |
| Veil's Edge | TransitionStrip | West edge (0,20) | Flickerveil -> Sketch gradient |
| Living Sketch | SolidificationZone | (20,25) | Creates rest point + RS on broadcast |
| Archive of Intentions | ResonancePoint (spiral layout) | (28,9) | 3 stones, lore triggers |
| Sketch River | PathSegment (water) | Left fork | Requires solidification to cross |
| Crystal Highway | CrystalHighway | Right fork | Preserver route, enemy patrols |
| Sketch Passage | DepthsEntrance | (13,36) | -> Depths L5 |
| Enemy zones | EncounterZone | Forest Paths, Archive Approach | Sketch Wolf, Treant, Echo |

#### Luminous Wastes (Scene 2)
| Feature | Organism | Position | Notes |
|---------|----------|----------|-------|
| Default fill | SketchVoidExpanse | Full canvas | *extremely* sparse, grid lines ON |
| Half-Built Village | Settlement (sketch-outline, solidifiable) | (20,20) | Dual state: outline -> full village |
| The Edge | WorldEdge | West boundary (5,20) | Narrative moment, no combat |
| Preserver Watchtower | (variant of crystallized outpost) | (35,10) | 2 elite Archivists |
| Crystal Highway | CrystalHighway | Cutting through wastes | Route to Fortress |
| Scatter objects | (part of SketchVoidExpanse) | Throughout | Fence post, well, tree outlines |
| RS points | ResonancePoint | 3 locations | Post-solidification, Edge, southeast |

#### Undrawn Peaks (Scene 3)
| Feature | Organism | Position | Notes |
|---------|----------|----------|-------|
| Default fill | SketchVoidExpanse | Full canvas | luminous void sky |
| Wireframe Mountains | WireframeMountain | Central + north | Geometric peaks, vertex markers |
| The Apex | SolidificationZone (3 ledges) + ResonancePoint | (20,5) | Highest point, panoramic view |
| Fortress Gate | TransitionStrip (sketch -> crystal) + DialogueChamber (mini) | (20,35) | Janik NPC, transition to F1 |
| Crystal Highway | CrystalHighway | Grym's highway to gate | 3 tiles wide, SP drain |
| Sketch Bridge | SolidificationZone | (20,20) | Bridge solidification |
| Enemy zones | EncounterZone | Mountain Paths, Fortress Approach | Wireframe Drake, Apex Guardian |

### Fortress Map Breakdown (Feature List)

#### F1: Gallery of Moments (Scene 6)
| Feature | Organism | Room | Notes |
|---------|----------|------|-------|
| Entry hall | dungeon-entry-hall (crystal variant) | 1-4 tiles | From Undrawn Peaks |
| Festival Hall | GalleryRoom (heavy) | Room 1 | 12 frozen NPCs, crystal barriers |
| Child's Steps | GalleryRoom (light, intimate) | Room 3 | Single frozen moment |
| Boss arena | CrystalBossArena | Room 5 | Grym's Right Hand, stasis hazards |
| Fracture points | FracturePoint (x4-6) | Throughout | God-dependent cracks |
| Crystal barriers | (linked to fractures) | Chokepoints | Broken by fracture shockwave |
| Rest point | ResonancePoint | (5,11) | HP/SP rest RS |
| Memory lift | (standard dungeon organism) | (3,11) | Shortcut to surface |
| Stairway | (standard dungeon organism) | (10,19) | -> F2 |

#### F2: Archive of Perfection (Scene 7)
| Feature | Organism | Room | Notes |
|---------|----------|------|-------|
| Entry hall | dungeon-entry-hall (crystal variant) | Top rows | From F1 |
| Moral Puzzle | MoralPuzzleRoom | Room 2 | 3 scenes, break 2, keep 1 |
| Hana's Hallway | GalleryRoom (decorative, no combat) | Room 4 | Crystal windows, narrative |
| Boss arena | CrystalBossArena | Room 5 | Archive Keeper, healing debuff |
| Fracture points | FracturePoint (x4-6) | Throughout | |
| Rest point | ResonancePoint | (3,17) | HP/SP rest RS |
| Stairway | (standard dungeon organism) | (15,19) | -> F3 |

#### F3: First Memory Chamber (Scenes 8-9)
| Feature | Organism | Notes |
|---------|----------|-------|
| The entire floor | DialogueChamber | 20x25 single room, no combat |
| First Memory pedestal | ResonancePoint (pedestal layout) | Unique: story-critical |
| Grym | NPC position | Dialogue encounter, not combat |
| God response zones | (runtime overlay, not assemblage) | 4 variants per emotion |

---

## Part 5: Palette Definitions

### `desert-sketch` Palette

**Source**: `assets/tilesets/sketch-realm/Tiled/Tilesets/` (29 TSX)

**Terrain mappings** (Wang set auto-tiling):

| Semantic Name | TSX File | Wang Set | Color Name | Usage |
|---------------|----------|----------|------------|-------|
| `void.luminous` | Tileset_Sand | Beach | Sand | Luminous void base |
| `void.deep` | Tileset_Sand | Beach | Dark Sand | Dense void areas |
| `void.edge` | Tileset_Sand | Beach | Sea | World boundary |
| `sketch.grass` | Tileset_Ground | Grounds | Grass | Solidified ground |
| `sketch.light-grass` | Tileset_Ground | Grounds | Light Grass | Solidified transition |
| `sketch.dirt` | Tileset_Ground | Grounds | Dirt | Paths, clearings |
| `crystal.path` | Tileset_Road | Road | Brick Road | Preserver highway |
| `crystal.dark` | Tileset_Road | Road | Dark Brick Road | Highway borders |
| `void.stream` | Tileset_Water | Water | Water | Glowing void rivers |
| `sketch.tallgrass` | Tileset_TallGrass_Desert | Tall Grass | Tall Grass | Sketch vegetation |
| `sketch.wall` | Tileset_Wall | Small wall | Wall | Half-drawn walls |
| `sketch.fence` | Tileset_Fence | Fence | Fence | Sketch fence outlines |
| `cliff.sand` | Tileset_RockSlope_Sand | (slope) | (slope) | Wireframe elevation |
| `cliff.wireframe` | Tileset_RockSlope2 | (slope) | (slope) | Secondary elevation |
| `shadow.sketch` | Tileset_Shadow | Shadow | Shadow | Party shadows |

**Key object mappings**:
- Dead trees (Tree_Dead_2-5) -> line-art tree outlines
- Ruined pillars/walls -> half-drawn structure fragments
- Magic crystals -> wireframe vertex markers
- Desert buildings -> sketch village outlines (WatchTower, Houses)
- Rocks (gray, sand variants) -> wireframe boulders

### `fortress-castles` Palette

**Source**: `assets/tilesets/fortress/Tiled/Tilesets/` (25 TSX)

**Terrain mappings**:

| Semantic Name | TSX File | Wang Set | Color Name | Usage |
|---------------|----------|----------|------------|-------|
| `crystal.slab` | Castle_Floor | Castle Floor | Slab Floor | Primary crystal floor |
| `crystal.mid-slab` | Castle_Floor | Castle Floor | Mid Slab Floor | Elevated areas |
| `crystal.wall` | Castle_Building | Castle Walls | Castle Walls Top | Corridor/room walls |
| `fortress.grass` | Tileset_Castle_Grass | Castle_Grass | Emerald Grass | Fracture zones (life breaking through) |
| `fortress.dirt` | Tileset_Ground_Castle | Grounds | Dirt | De-crystallized areas |
| `fortress.snow` | Tileset_Ground_Castle | Grounds | Snow Grass | Ice crystal areas |
| `crystal.corridor` | Tileset_Road | Road | Light Brick Road | Polished walkways |
| `crystal.pool` | Tileset_Water | Water | Water | Reflective pools |
| `crystal.cliff` | Tileset_RockSlope | Rock Slope 1 | Rock Slope | Crystal elevation |
| `shadow.crystal` | Tileset_Shadow | Shadow | Shadow | Atmospheric depth |

**Key object mappings**:
- Towers (BlueBricks, Hay, RedWood) -> crystal pillars/structures
- Trees/Bushes (Emerald variants) -> fracture zone vegetation
- Props (Banners, Weapon Stands, Lamps, etc.) -> gallery furnishings
- Fountain animation -> crystal pool animated center

---

## Part 6: DDL Tile Size Resolution

All Act 3 DDL files specify `"tileSize": 32` but the codebase standard is 16px. This affects every dimension.

**Recommendation**: Update DDL to 16px, double all dimensions:
- Sketch maps: 40x40 -> 80x80 at 16px
- Fortress floors: 20x25 -> 40x50 at 16px

This aligns with the convention used in Everwick (60x60@16px) and Heartfield (80x80@16px).

---

## Part 7: Organism Catalog (What to Build, in What Order)

### Cross-Game Organisms (Parameterized, Palette-Agnostic)

These already have precedent. They need to be extracted from existing one-off factories into parameterized organism constructors:

| Organism | Existing Precedent | New Params Needed |
|----------|-------------------|-------------------|
| Settlement | Everwick map, Heartfield hamlet | `solidifiable`, `style: 'sketch-outline'` |
| Border | `createForestBorder()` | `style: 'void-fade' / 'crystal-wall' / 'world-edge'` |
| TransitionStrip | Sunridge threshold concept | Already generic |
| ResonancePoint | Scattered in all maps | `layout`, `requiresBroadcast` |
| DepthsEntrance | dungeon-scout report | Already generic |
| Stagnation/Crystal Zone | `createStagnationClearing()` | `style: 'fortress-crystal'` |

### Sketch-Specific Organisms

| Organism | Priority | Blocks |
|----------|----------|--------|
| SketchVoidExpanse | HIGH | All 3 Sketch maps (default fill) |
| SolidificationZone | HIGH | All 3 Sketch maps (core mechanic) |
| CrystalHighway | MEDIUM | All 3 Sketch maps (Preserver routes) |
| WireframeMountain | MEDIUM | Undrawn Peaks only |
| WorldEdge | LOW | Luminous Wastes only |

### Fortress-Specific Organisms

| Organism | Priority | Blocks |
|----------|----------|--------|
| GalleryRoom | HIGH | F1, F2 |
| FracturePoint | HIGH | F1, F2 |
| CrystalBossArena | HIGH | F1, F2 |
| MoralPuzzleRoom | MEDIUM | F2 only |
| DialogueChamber | MEDIUM | F3 (simplest layout, but narratively critical) |

### Build Priority

1. `desert-sketch` palette (blocks all Sketch maps)
2. `fortress-castles` palette (blocks all Fortress maps)
3. SketchVoidExpanse + SolidificationZone (the two defining Sketch mechanics)
4. GalleryRoom + FracturePoint (the two defining Fortress mechanics)
5. Half-Drawn Forest map (first Sketch experience)
6. Fortress F1 map (first Fortress floor)
7. Luminous Wastes + Undrawn Peaks (remaining Sketch)
8. Fortress F2 + F3 (remaining Fortress)

Scenes 4-5 (Depths L5) use the `dungeon-depths` palette -- handled by dungeon-scout.
Scenes 10-12 (Endgame Bloom) reuse existing maps at vibrancy 95 -- no new organisms.
